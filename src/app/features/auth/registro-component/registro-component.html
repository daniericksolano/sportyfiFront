<div class="container mt-4">
  <div class="row justify-content-center">
    <div class="col-12 col-md-8">
      <div class="card shadow">
        <div class="card-header text-white">
          <h4 class="mb-0">
            <i class="bi bi-list me-2"></i>
            Crear Cuenta
          </h4>
        </div>
      <form [formGroup]="form" (ngSubmit)="onSubmit()" class="card-body">
        <app-input [nameInput]="'nombre'" [id]="'nombre'" [label]="'Nombre completo'"
          [type]="'text'" [placeholder]="'Ej: Juan Pérez'" [submitted]="submitted"></app-input>

        <app-input [nameInput]="'correo'" [id]="'correo'" [label]="'Correo electrónico'"
          [type]="'email'" [placeholder]="'ejemplo@mail.com'" [submitted]="submitted"></app-input>

        <app-input [nameInput]="'celular'" [id]="'celular'" [label]="'Celular'"
          [type]="'number'" [placeholder]="'Ej: 123456789'" [submitted]="submitted"></app-input>

        <app-input [nameInput]="'password'" [id]="'password'" [label]="'Contraseña'"
          [type]="'password'" [placeholder]="'Mínimo 6 caracteres'" [submitted]="submitted"></app-input>

        <app-input [nameInput]="'confirmarPassword'" [id]="'confirmarPassword'" [label]="'Confirmar contraseña'"
          [type]="'password'" [placeholder]="'Repite la contraseña'" [submitted]="submitted"></app-input>
        @if (form.hasError('passwordMismatch')) {
        <small class="text-danger">
          Las contraseñas no coinciden.
        </small>
        }

        <app-input [nameInput]="'pais'" [id]="'pais'" [label]="'País'"
          [type]="'text'" [placeholder]="'Ej: España'" [submitted]="submitted"></app-input>

        <app-input [nameInput]="'ciudad'" [id]="'ciudad'" [label]="'Ciudad'"
          [type]="'text'" [placeholder]="'Ej: Madrid'" [submitted]="submitted"></app-input>

        <div class="mb-3">
          <label for="tipoUsuario" class="form-label">¿Qué tipo de usuario eres?</label>
          <select id="tipoUsuario" class="form-select" formControlName="tipoUsuario">
            <option value="" disabled>Selecciona tipo</option>
            <option value="deportista">Deportista</option>
            <option value="cazatalentos">Cazatalentos</option>
          </select>
        </div>
        @if (form.get('tipoUsuario')?.value === 'deportista') {

        <app-input [nameInput]="'club'" [id]="'club'" [label]="'Club'"
          [type]="'text'" [placeholder]="'Ej: FC Barcelona'" [submitted]="submitted"></app-input>

        <app-input [nameInput]="'fechaNacimiento'" [id]="'fechaNacimiento'" [label]="'Fecha de nacimiento'"
          [type]="'date'" [placeholder]="'Ej: 2000-01-01'" [submitted]="submitted"></app-input>
        }
        @if (form.get('tipoUsuario')?.value === 'cazatalentos') {
          <app-input [nameInput]="'tipo'" [id]="'tipo'" [label]="'Tipo de cazatalentos'"
          [type]="'text'" [placeholder]="'Ej: Manager'" [submitted]="submitted"></app-input>

          <app-input [nameInput]="'organizacionPertenece'" [id]="'organizacionPertenece'" [label]="'Organización'"
          [type]="'text'" [placeholder]="'Ej: FIFA'" [submitted]="submitted"></app-input>
        }
        <div class="mb-3">
          <label for="foto" class="form-label">Foto de perfil</label>
          <input id="foto" type="file" class="form-control" (change)="onFileChange($event)" />
          @if (fotoPreview) {
            <div class="mt-3 text-center">
              <img [src]="fotoPreview" alt="Foto de perfil" class="img-thumbnail" style="max-width: 150px;" />
            </div>
          }
        </div>

        <div class="d-grid">
          <button type="submit" class="btn btn-primary">Registrarse</button>
        </div>
      </form>
      </div>
    </div>
  </div>
</div>